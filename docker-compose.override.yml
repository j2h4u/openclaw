# Local overrides (not tracked by git)
services:
  openclaw-gateway:
    container_name: openclaw-gateway
    environment:
      TZ: ${TZ:-UTC}
    volumes:
      - ${OPENCLAW_CONFIG_DIR}:/home/node/.openclaw
      - ${OPENCLAW_WORKSPACE_DIR}:/home/node/.openclaw/workspace
      - /home/j2h4u/repos/telegram-queue:/home/node/plugins/telegram-queue
    tmpfs:
      - /home/node:size=512M,uid=1000,gid=1000
    ports:
      - "8443:8443"
    command:
      - /bin/sh
      - -c
      - |
        echo "Installing LanceDB dependencies..."
        npm install --prefix /home/node/.openclaw/extensions/memory-lancedb 2>/dev/null || true
        npm install -g @xenova/transformers 2>/dev/null || true
        echo "Starting gateway..."
        exec node dist/index.js gateway --bind $${OPENCLAW_GATEWAY_BIND:-lan} --port $${OPENCLAW_GATEWAY_PORT:-18789}

  openclaw-cli:
    environment:
      TZ: ${TZ:-UTC}
    volumes:
      - ${OPENCLAW_CONFIG_DIR}:/home/node/.openclaw
      - ${OPENCLAW_WORKSPACE_DIR}:/home/node/.openclaw/workspace
    tmpfs:
      - /home/node:size=512M,uid=1000,gid=1000
